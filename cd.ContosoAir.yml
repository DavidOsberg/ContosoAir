# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

   pool:
     name: default
     
   trigger:
     - None

   resources:
     pipelines:
      - pipeline: buildContosoAir # identifier for the resource used in pipeline resource variables
        source: Student1-52477213.ContosoAir # name of the pipeline that produces the artifact  
        trigger:
          branches:
           include:
             - master  
   steps:
   - task: DownloadPipelineArtifact@2
     inputs:
        buildType: 'specific'
        project: '4105d8cc-2060-4da5-b82f-30388f41cfa6'
        definition: '4'
        buildVersionToDownload: 'latest'
        targetPath: '$(Pipeline.Workspace)'
   - task: AzureRmWebAppDeployment@5
     inputs:
       ConnectionType: 'AzureRM'
       azureSubscription: 'Azure Connection'
       appType: 'webApp'
       WebAppName: '$(web_prefix)-$(web_site)-$(web_environment)'
       packageForLinux: '$(Pipeline.Workspace)/**/*.zip'


